(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{106:function(e,t,a){},108:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},113:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),r=a(7),s=a.n(r),o=(a(77),a(16)),i=a(6),l=(a(78),a(79),a(1));var d=function(){return Object(l.jsx)("div",{className:"Header",children:Object(l.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark",children:Object(l.jsxs)("div",{className:"container-fluid",children:[Object(l.jsx)("a",{className:"navbar-brand",href:"/",children:"RestrOrder"}),Object(l.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(l.jsx)("span",{className:"navbar-toggler-icon"})}),Object(l.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent",children:Object(l.jsxs)("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0",children:[Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(o.b,{className:"nav-link active","aria-current":"page",to:"/",children:"Home"})}),Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(o.b,{className:"nav-link active",to:"/menu",children:"Menu"})}),Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(o.b,{className:"nav-link active",to:"/checkout",children:"Checkout"})}),Object(l.jsx)("li",{className:"nav-item",children:Object(l.jsx)(o.b,{className:"nav-link active",to:"/admin",children:"Admin"})})]})})]})})})},u=a(3);a(43);var j=function(){return Object(l.jsxs)("div",{className:"loader-container",children:[Object(l.jsx)("img",{className:"loader-image",src:"/Loading.png",alt:"Loading..."}),Object(l.jsxs)("button",{className:"btn loader-button",type:"button",disabled:!0,children:[Object(l.jsx)("span",{className:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"}),"     ","Loading..."]})]})};a(88);var m=function(){var e=Object(c.useState)(!0),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Object(i.f)();return Object(c.useEffect)((function(){setTimeout((function(){return n(!1)}),1200)}),[]),Object(l.jsx)("div",{className:"Home",children:a?Object(l.jsx)(j,{}):Object(l.jsx)("div",{className:"container home",children:Object(l.jsxs)("div",{className:"row rowHome",children:[Object(l.jsx)("div",{className:"col details",children:Object(l.jsx)("img",{className:"image",src:"/restaurant.png",alt:"Logo"})}),Object(l.jsxs)("div",{className:"col details",children:[Object(l.jsx)("div",{className:"name",children:"RestrOrder"}),Object(l.jsx)("div",{className:"features",children:'"Best Dishes in the Town, Serve with love."'}),Object(l.jsx)("div",{children:Object(l.jsx)("button",{className:"Button",onClick:function(){r.push("/menu")},children:"Hungry? Order Now"})})]})]})})})},b=a(17),O=a.n(b),h=a(20);a(44),a(106);h.a.configure();var p=function(e){return Object(l.jsxs)("div",{className:"Item",children:[Object(l.jsx)("div",{className:"img-container",children:Object(l.jsx)("img",{className:"img",src:e.item.logo,alt:e.item.name})}),Object(l.jsxs)("div",{className:"Details",children:[Object(l.jsx)("p",{className:"Name",children:e.item.name}),Object(l.jsx)("p",{className:"Description",children:e.item.description})]}),Object(l.jsxs)("div",{className:"Order",children:[Object(l.jsx)("p",{className:"Price",children:"\u20b9"+e.item.price}),Object(l.jsx)("button",{name:e.index,className:"Add",onClick:function(t){h.a.success("".concat(e.item.name," added to cart"),{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"colored"});var a=t.target.name,c=JSON.parse(localStorage.getItem("order"));c[Number(a)]+=1,localStorage.setItem("order",JSON.stringify(c));var n=Number(localStorage.getItem("total"));localStorage.setItem("total",n+Number(e.item.price))},children:"+"})]})]})},v=a(66),_=a.n(v),g=a(134);var x=function(e){return Object(l.jsx)(g.a,{title:"Checkout",children:Object(l.jsx)("button",{className:"cartbtn",style:{display:"block"},onClick:e.onClick,children:Object(l.jsx)(_.a,{})})})},f="http://localhost:5000";a(108);var N=function(e){var t=Object(c.useState)([]),a=Object(u.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(!0),o=Object(u.a)(s,2),d=o[0],m=o[1],b=Object(i.f)();if(Object(c.useEffect)((function(){O.a.get("".concat(f,"/loadmenu")).then((function(e){r(e.data),localStorage.setItem("list",JSON.stringify(n)),setTimeout((function(){return m(!1)}),1500)}))}),[n]),null===localStorage.getItem("order")||JSON.parse(localStorage.getItem("order")).length!==n.length){var h=[];n.forEach((function(e){h.push(0)})),localStorage.setItem("order",JSON.stringify(h)),localStorage.setItem("total",0)}return Object(l.jsxs)("div",{children:[d&&Object(l.jsx)(j,{}),!d&&Object(l.jsxs)("div",{className:"Menu",children:[Object(l.jsx)("p",{className:"menu",children:"MENU"}),null===n||void 0===n?void 0:n.map((function(e,t){return Object(l.jsx)(p,{item:e,index:t},t)})),Object(l.jsx)(x,{onClick:function(){return b.push("/checkout")}})]})]})},S=a(25),k=a.n(S),y=a(39),I=a(67);a(110);function C(e){return new Promise((function(t){var a=document.createElement("script");a.src=e,a.onload=function(){t(!0)},a.onerror=function(){t(!1)},document.body.appendChild(a)}))}h.a.configure();var E=function(e){var t=Object(i.f)(),a=Object(c.useState)([]),n=Object(u.a)(a,2),r=n[0],s=n[1],o=Object(c.useState)(["",""]),d=Object(u.a)(o,2),m=Object(u.a)(d[0],2),b=m[0],p=m[1],v=d[1],_=Object(c.useState)("hidden"),g=Object(u.a)(_,2),x=g[0],N=g[1],S=Object(c.useState)("show"),E=Object(u.a)(S,2),w=E[0],T=E[1],P=Object(c.useState)(!0),J=Object(u.a)(P,2),R=J[0],H=J[1];function B(e){h.a.error("Error: ".concat(e),{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"colored"})}function L(){h.a.success("Placing your Order",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"colored"})}function D(){for(var e=JSON.parse(localStorage.getItem("order")),t=0;t<e.length;t++)e[t]=0;localStorage.setItem("order",JSON.stringify(e)),localStorage.setItem("total",0)}function A(e){var t=Number(e.target.name),a=JSON.parse(localStorage.getItem("order")),c=JSON.parse(localStorage.getItem("list")),n=JSON.parse(localStorage.getItem("total")),r=[];a[t]+=1,n+=Number(c[t].price),localStorage.setItem("order",JSON.stringify(a)),localStorage.setItem("total",JSON.stringify(n)),a.forEach((function(e,t){e>0&&r.push({key:t,name:c[t].name,price:c[t].price,qty:e})})),s(r)}function q(e){var a=Number(e.target.name),c=JSON.parse(localStorage.getItem("order")),n=JSON.parse(localStorage.getItem("list")),r=localStorage.getItem("total"),o=[];c[a]-=1,(r-=Number(n[a].price))<=0&&(B("No order for Checkout"),t.push("/menu")),localStorage.setItem("order",JSON.stringify(c)),localStorage.setItem("total",JSON.stringify(r)),c.forEach((function(e,t){e>0&&o.push({key:t,name:n[t].name,price:n[t].price,qty:e})})),s(o)}function z(){var e=localStorage.getItem("total"),t=new I.a("p","pt");t.text(200,30,"Restro Order - Your Bill"),t.text(70,50,"Name: ".concat(b)),t.text(360,50,"Phone No.: ".concat(p)),t.text(0,60,"_______________________________________________________________________"),t.text(230,80,"Total: Rs.".concat(e,"/-")),t.text(0,90,"_______________________________________________________________________");var a=120,c=1;r.forEach((function(e){t.text(25,a,"".concat(c,". ")),t.text(75,a,"".concat(e.name)),t.text(255,a,"Qty: ".concat(e.qty)),t.text(325,a,"Rs.".concat(e.price)),t.text(455,a,"Rs.".concat(e.qty*e.price)),a+=40,c+=1})),t.save("Bill.pdf")}function U(e){O.a.post("".concat(f,"/print"),{list:r,name:b,number:p,total:Number(localStorage.getItem("total")),mode:e,served:!1})}function F(){U("Online"),z(),L(),D(),t.push("/")}function K(){return(K=Object(y.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C("https://checkout.razorpay.com/v1/checkout.js");case 2:if(e.sent){e.next=6;break}return alert("Razorpay SDK failed to load. Are you online?"),e.abrupt("return");case 6:return e.next=8,O.a.post("/razorpay",{amount:Number(localStorage.getItem("total"))});case 8:t=e.sent,a={key:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).RAZOR_ID,currency:t.data.currency,amount:t.data.amount.toString(),order_id:t.data.id,name:"Your Order",description:"Thank you for Ordering.",image:"/logo",handler:function(e){alert(e.razorpay_payment_id),alert(e.razorpay_order_id),alert(e.razorpay_signature),F()},prefill:{name:b,email:"example@gmail.com",phone_number:p}},new window.Razorpay(a).open();case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.useEffect)((function(){if(localStorage.getItem("total")<=0&&(B("No order for Checkout"),t.push("/menu")),0===r.length&&null!==localStorage.getItem("order")&&null!==localStorage.getItem("list")){var e=[],a=JSON.parse(localStorage.getItem("order")),c=JSON.parse(localStorage.getItem("list"));a.forEach((function(t,a){t>0&&e.push({key:a,name:c[a].name,price:c[a].price,qty:t})})),s(e),setTimeout((function(){return H(!1)}),1500)}}),[r,t]),Object(l.jsx)("div",{className:"Checkout",children:R?Object(l.jsx)(j,{}):Object(l.jsx)("div",{className:"container checkout",children:Object(l.jsxs)("div",{className:"row checkout-row",children:[Object(l.jsxs)("div",{className:"col left "+x,children:[Object(l.jsx)("div",{className:"Thank",children:"THANK YOU FOR ORDERING"}),Object(l.jsxs)("div",{className:"fills "+x,children:[Object(l.jsx)("div",{className:"inst",children:"Please fill the details below:"}),Object(l.jsxs)("div",{className:"ind",children:[Object(l.jsx)("div",{className:"label",children:"Name :"}),Object(l.jsx)("input",{className:"input",type:"text",value:b,onChange:function(e){v([e.target.value,p])}})]}),Object(l.jsxs)("div",{className:"ind",children:[Object(l.jsx)("div",{className:"label",children:"Phone:"}),Object(l.jsx)("input",{className:"input",type:"number",value:p,onChange:function(e){v([b,e.target.value])}})]})]}),Object(l.jsxs)("div",{className:"bill",children:[Object(l.jsx)("button",{className:"pay cash",onClick:function(){b.length>0&&10===p.length?(U("Cash"),z(),L(),D(),t.push("/")):B("Please fill the correct details")},children:"Cash Payment"}),Object(l.jsx)("button",{className:"pay upi",onClick:function(){b.length>0&&10===p.length?function(){K.apply(this,arguments)}():B("Please fill the correct details")},children:"UPI - PayTM, PhonePe.."})]})]}),Object(l.jsxs)("div",{className:"col right",children:[Object(l.jsxs)("div",{className:"Total",children:["Total: ","\u20b9"+localStorage.getItem("total")]}),Object(l.jsx)("div",{className:"Items",children:r.map((function(e,t){return Object(l.jsxs)("div",{className:"item",children:[Object(l.jsxs)("div",{className:"order",children:[Object(l.jsx)("p",{className:"Name",children:e.name}),Object(l.jsx)("p",{className:"Price",children:"\u20b9 "+e.price})]}),Object(l.jsxs)("div",{className:"changeBtns "+w,children:[Object(l.jsx)("button",{name:e.key,className:"change",onClick:q,children:"-"}),Object(l.jsx)("button",{name:e.key,className:"change",onClick:A,children:"+"}),Object(l.jsx)("p",{className:"qty",children:e.qty})]})]},t)}))}),Object(l.jsx)("button",{className:"confirm "+w,onClick:function(){localStorage.getItem("total")>0&&(N("show"),T("hidden"))},children:"Checkout"})]})]})})})};a(111);var w=function(e){var t=Object(c.useState)(""),a=Object(u.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)(""),o=Object(u.a)(s,2),i=o[0],d=o[1],j=Object(c.useCallback)((function(){e.handleLogin(n,i),r(""),d("")}),[n,i,e]);return Object(c.useEffect)((function(){var e=function(e){"Enter"!==e.code&&"NumpadEnter"!==e.code||j()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[j]),Object(l.jsxs)("div",{className:"login",children:[Object(l.jsx)("h1",{className:"title",children:"Welcome Back"}),Object(l.jsx)("p",{className:"sub-title",children:"For Restaurant Staff only"}),Object(l.jsxs)("div",{className:"input-container",children:[Object(l.jsx)("input",{className:"admin-input",type:"email",placeholder:"Admin Id*",value:n,onChange:function(e){return r(e.target.value)}}),Object(l.jsx)("input",{className:"admin-input",type:"password",placeholder:"Password*",value:i,onChange:function(e){return d(e.target.value)}}),Object(l.jsx)("input",{className:"submit",type:"button",value:"LOGIN",onClick:j})]})]})};a(112);var T=function(e){var t=e.invoice,a=e.index,n=Object(c.useState)(t.served?"cut":""),r=Object(u.a)(n,2),s=r[0],o=r[1];return Object(l.jsxs)("div",{className:"invoice",children:[Object(l.jsxs)("div",{className:"invoice-owner",children:[Object(l.jsx)("p",{className:s,children:t.name}),Object(l.jsx)("p",{className:s,children:t.number})]}),Object(l.jsx)("div",{className:"invoice-list",children:t.list.map((function(e,t){return Object(l.jsxs)("div",{className:"invoice-order",children:[Object(l.jsx)("p",{className:s,children:e.name}),Object(l.jsx)("p",{className:s,children:e.qty+" X "+e.price})]},t)}))}),Object(l.jsxs)("div",{className:"invoice-total",children:[Object(l.jsx)("p",{className:s,children:"\u20b9"+t.total+" ("+t.mode+")"}),Object(l.jsx)("button",{name:a,className:"invoice-served "+s,onClick:function(){o("cut"),O.a.patch("".concat(f,"/invoices"),{id:t._id,served:!0})},children:"Served"})]})]})},P=a(68),J=a.n(P);var R=function(e){return Object(l.jsx)(g.a,{title:"LOGOUT",children:Object(l.jsx)("button",{className:"logout",style:{display:"block"},onClick:e.onClick,children:Object(l.jsx)(J.a,{})})})};var H=function(e){var t=Object(c.useState)(!1),a=Object(u.a)(t,2),n=a[0],r=a[1],s=Object(c.useState)([]),o=Object(u.a)(s,2),i=o[0],d=o[1],m=Object(c.useState)([]),b=Object(u.a)(m,2),p=b[0],v=b[1],_=Object(c.useState)(!0),g=Object(u.a)(_,2),x=g[0],N=g[1];function S(e){h.a.error("Error: ".concat(e),{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!1,draggable:!0,progress:void 0,theme:"colored"})}Object(c.useEffect)((function(){localStorage.getItem("token")?(r(!0),O.a.get("".concat(f,"/invoices")).then((function(e){var t=e.data;d(t.filter((function(e){return!e.served}))),v(t.filter((function(e){return e.served})))})),setTimeout((function(){return N(!1)}),1500)):setTimeout((function(){return N(!1)}),1500)}),[n]);var I=function(){var e=Object(y.a)(k.a.mark((function e(t,a){var c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),e.next=4,O.a.post("/login",{admin:t,password:a});case 4:(c=e.sent).data.token?(localStorage.setItem("token",c.data.token),r(!0),setTimeout((function(){return N(!1)}),1500)):(S(c.data.message),setTimeout((function(){return N(!1)}),1e3)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),S(e.t0.message),setTimeout((function(){return N(!1)}),1500);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}();return Object(l.jsxs)("div",{children:[x&&Object(l.jsx)(j,{}),!x&&!1===n&&Object(l.jsx)(w,{handleLogin:I}),!x&&!0===n&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(R,{onClick:function(){N(!0),r(!1),localStorage.removeItem("token"),setTimeout((function(){return N(!1)}),1500)}}),null===i||void 0===i?void 0:i.map((function(e,t){return Object(l.jsx)(T,{index:t,invoice:e},t)})),null===p||void 0===p?void 0:p.map((function(e,t){return Object(l.jsx)(T,{index:t,invoice:e},t)}))]})]})};var B=function(){return Object(c.useEffect)((function(){null===localStorage.getItem("total")&&localStorage.setItem("total",0)}),[]),Object(l.jsx)("div",{className:"App",children:Object(l.jsxs)(o.a,{children:[Object(l.jsx)(d,{}),Object(l.jsxs)(i.c,{children:[Object(l.jsx)(i.a,{exact:!0,path:"/",children:Object(l.jsx)(m,{})}),Object(l.jsx)(i.a,{path:"/checkout",children:Object(l.jsx)(E,{})}),Object(l.jsx)(i.a,{path:"/menu",children:Object(l.jsx)(N,{})}),Object(l.jsx)(i.a,{path:"/admin",children:Object(l.jsx)(H,{})}),Object(l.jsx)(i.a,{path:"*",children:Object(l.jsx)(m,{})})]})]})})};s.a.render(Object(l.jsx)(n.a.StrictMode,{children:Object(l.jsx)(B,{})}),document.getElementById("root"))},43:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},88:function(e,t,a){}},[[113,1,3]]]);
//# sourceMappingURL=main.7d38cede.chunk.js.map